<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>أبا الحسن عباس | الترجمة والتدريس</title>
  
  <!-- تحسين تحميل الموارد -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="style.css" as="style">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
  
  <style>
    /* تحسين التنسيقات الأساسية */
    :root {
      --primary-color: #004085;
      --secondary-color: #006ad7;
      --text-color: #333;
      --background-color: #fff;
      --shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    /* تحسين الأداء */
    .lazy-load {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .lazy-load.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* تحسين تجربة الهاتف المحمول */
    @media (max-width: 768px) {
      .main-nav {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 8px;
        border-radius: 15px 15px 0 0;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      }
      
      .nav-btn {
        font-size: 14px;
        padding: 8px;
        margin: 4px;
      }
      
      .contact-form-modern {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- شريط تغيير اللغة -->
  <div class="fixed-lang-switcher">
    <button class="lang-btn" onclick="switchLang('ar')" title="العربية">
      <img class="lang-flag-img" src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/sa.svg" alt="العربية" />
      <span>العربية</span>
    </button>
    <button class="lang-btn" onclick="switchLang('en')" title="English">
      <img class="lang-flag-img" src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/gb.svg" alt="English" />
      <span>English</span>
    </button>
    <button class="lang-btn" onclick="switchLang('it')" title="Italiano">
      <img class="lang-flag-img" src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/it.svg" alt="Italiano" />
      <span>Italiano</span>
    </button>
  </div>

  <!-- القائمة الرئيسية -->
  <nav class="main-nav">
    <a href="#about" class="nav-btn scroll-link">عنّي</a>
    <a href="#portfolio" class="nav-btn scroll-link">الأعمال</a>
    <a href="#translation-gallery" class="nav-btn scroll-link"> المكتبة الصوريّة - ترجمة</a>
    <a href="#testimonials" class="nav-btn scroll-link">شهادات العملاء</a>
    <a href="#counters" class="nav-btn scroll-link">الإحصائيات</a>
    <a href="#faq" class="nav-btn scroll-link">الأسئلة</a>
    <a href="#blog" class="nav-btn scroll-link">المدونة</a>
    <a href="#resources" class="nav-btn scroll-link">الملفات</a>
    <a href="#contact" class="nav-btn scroll-link">تواصل</a>
    <button class="toggle-mode" id="toggle-mode"><i class="fa-solid fa-moon"></i></button>
    <button class="share-btn" title="مشاركة الصفحة"><i class="fa-solid fa-share-nodes"></i></button>
    <button class="qr-btn" title="QR لموقعي"><i class="fa-solid fa-qrcode"></i></button>
  </nav>

  <header class="main-header" id="about">
    <img src="me.jpg" alt="أبا الحسن عباس" class="profile-pic lazy-load" 
         onerror="this.onerror=null;this.src='https://ui-avatars.com/api/?name=%D8%A3%D8%A8%D8%A7+%D8%A7%D9%84%D8%AD%D8%B3%D9%86+%D8%B9%D8%A8%D8%A7%D8%B3&background=0059b3&color=fff&rounded=true&size=128';">
    <h1 id="name">أبا الحسن عباس</h1>
    <h2 id="title">مترجم | أستاذ لغة إنجليزية | كاتب | محرر | مصمم | مصور | مدير مواقع</h2>
    <p id="description">أفضل خدمات الترجمة والتعليم باللغتين العربية والإنجليزية. استشارات تصميم وتصوير احترافية.</p>
    <a href="Aba_AlHassan_Abbas_CV.pdf" target="_blank" class="btn-cv" id="download-cv"><i class="fa-solid fa-download"></i> تحميل السيرة الذاتية</a>
    <button class="btn-cv" onclick="showCV()"><i class="fa-solid fa-eye"></i> عرض السيرة الذاتية</button>
    <button class="intro-video-btn" onclick="showIntroVideo()"><i class="fa-solid fa-play"></i> فيديو تعريفي</button>
  </header>

  <!-- قسم مكتبة الصورة - ترجمة -->
  <section class="translation-gallery-section" id="translation-gallery">
    <h3><i class="fa-solid fa-images"></i> مكتبة الصورة - ترجمة</h3>
    <button class="translation-gallery-btn" id="open-translation-gallery">
      <i class="fa-solid fa-eye"></i> اضغط هنا لعرض جميع صور الترجمة
    </button>
  </section>

  <section class="counters-section" id="counters">
    <div class="stats-cards">
      <div class="stat-card"><i class="fa-solid fa-language"></i><span class="counter" data-target="10">0</span><small>سنوات خبرة</small></div>
      <div class="stat-card"><i class="fa-solid fa-users"></i><span class="counter" data-target="250">0</span><small>عميل سعيد</small></div>
      <div class="stat-card"><i class="fa-solid fa-award"></i><span class="counter" data-target="20">0</span><small>مشروع مكتمل</small></div>
      <div class="stat-card"><i class="fa-solid fa-certificate"></i><span class="counter" data-target="8">0</span><small>شهادة احترافية</small></div>
    </div>
  </section>

  <section class="portfolio-section" id="portfolio">
    <div style="display:flex;align-items:center;justify-content:space-between;">
      <h3 style="margin-bottom:0;"><i class="fa-solid fa-briefcase"></i> معرض الأعمال</h3>
      <button id="toggle-portfolio-btn" style="font-size:1.4rem;background:none;border:none;cursor:pointer;" title="إظهار/إخفاء معرض الأعمال">
        <i class="fa-solid fa-chevron-down"></i>
      </button>
    </div>
    <div id="portfolio-content" style="transition:max-height 0.3s;overflow:hidden;max-height:0;">
      <div class="portfolio-filters">
        <button class="portfolio-filter active" data-filter="all">الكل</button>
        <button class="portfolio-filter" data-filter="translation">ترجمة</button>
        <button class="portfolio-filter" data-filter="design">تصميم</button>
        <button class="portfolio-filter" data-filter="photography">تصوير</button>
        <button class="portfolio-filter" data-filter="teaching">تدريس</button>
        <button class="portfolio-filter" data-filter="web">مواقع</button>
      </div>
      <div class="portfolio-gallery" id="portfolio-gallery">
        <!-- الأعمال ستُولّد تلقائيًا من جافاسكربت -->
      </div>
    </div>
  </section>

  <section class="testimonials-section" id="testimonials">
    <h3><i class="fa-solid fa-comment-dots"></i> شهادات العملاء</h3>
    <div class="swiper testimonials-swiper">
      <div class="swiper-wrapper" id="testimonials-wrapper">
        <!-- الشهادات ستُولّد تلقائيًا من جافاسكربت -->
      </div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
      <div class="swiper-pagination"></div>
    </div>
  </section>

  <section class="certificates-section" id="certificates">
    <h3><i class="fa-solid fa-graduation-cap"></i> شهاداتي الاحترافية</h3>
    <div class="certificates-gallery" id="certificates-gallery">
      <!-- الشهادات ستُولّد تلقائيًا من جافاسكربت -->
    </div>
  </section>

  <section class="faq-section" id="faq">
    <h3><i class="fa-solid fa-circle-question"></i> الأسئلة المتكررة</h3>
    <div class="faq-list" id="faq-list">
      <!-- الأسئلة ستُولّد تلقائيًا من جافاسكربت -->
    </div>
  </section>

  <section class="blog-section" id="blog">
    <h3><i class="fa-solid fa-newspaper"></i> المدونة</h3>
    <div class="blog-list" id="blog-list">
      <!-- المقالات ستُولّد تلقائيًا من جافاسكربت -->
    </div>
  </section>

  <section class="resources-section" id="resources">
    <h3><i class="fa-solid fa-download"></i> مكتبة الملفات المجانية</h3>
    <div class="resources-list" id="resources-list">
      <!-- الملفات ستُولّد تلقائيًا من جافاسكربت -->
    </div>
  </section>

  <section class="contact-section" id="contact">
    <h3 id="contact-title">تواصل معي</h3>
    <div class="contact-flex-wrap">
      <div class="contact-social">
        <ul class="contact-social-list">
          <li><a href="mailto:abamunji99@gmail.com"><span class="icon icon-mail"><i class="fa-solid fa-envelope"></i></span> abamunji99@gmail.com</a></li>
          <li><a href="https://wa.me/9647735379147" target="_blank"><span class="icon icon-wa"><i class="fa-brands fa-whatsapp"></i></span> واتساب</a></li>
          <li><a href="https://www.linkedin.com/in/aba-al-hassan-abbas-178b85329" target="_blank"><span class="icon icon-li"><i class="fa-brands fa-linkedin-in"></i></span> LinkedIn</a></li>
          <li><a href="https://github.com/AdamMunji" target="_blank"><span class="icon icon-gh"><i class="fa-brands fa-github"></i></span> GitHub</a></li>
          <li><a href="https://www.youtube.com/@-aba-alhassanabbas7478" target="_blank"><span class="icon icon-yt"><i class="fa-brands fa-youtube"></i></span> YouTube</a></li>
          <li><a href="https://www.instagram.com/engwithaba" target="_blank"><span class="icon icon-ig"><i class="fa-brands fa-instagram"></i></span> Instagram</a></li>
          <li><a href="https://www.facebook.com/aba.alhsn.bas" target="_blank"><span class="icon icon-fb"><i class="fa-brands fa-facebook-f"></i></span> Facebook</a></li>
          <li><a href="https://t.me/learn4peace" target="_blank"><span class="icon icon-tg"><i class="fa-brands fa-telegram"></i></span> Telegram</a></li>
        </ul>
      </div>
      <form id="contact-form" class="contact-form-modern" autocomplete="off">
        <div class="form-row">
          <div class="input-group">
            <label for="inputName"><i class="fa-solid fa-user"></i></label>
            <input type="text" name="name" id="inputName" placeholder="الاسم" autocomplete="off" required />
          </div>
          <div class="input-group">
            <label for="inputEmail"><i class="fa-solid fa-envelope"></i></label>
            <input type="email" name="email" id="inputEmail" placeholder="البريد الإلكتروني" autocomplete="off" required />
          </div>
        </div>
        <div class="form-row">
          <div class="input-group">
            <label for="inputTitle"><i class="fa-solid fa-heading"></i></label>
            <input type="text" name="title" id="inputTitle" placeholder="عنوان الرسالة (اختياري)" autocomplete="off" />
          </div>
          <div class="input-group">
            <label for="inputTime"><i class="fa-solid fa-clock"></i></label>
            <input type="text" name="time" id="inputTime" placeholder="الوقت (اختياري)" autocomplete="off" />
          </div>
        </div>
        <div class="input-group textarea-group">
          <label for="inputMessage"><i class="fa-solid fa-message"></i></label>
          <textarea name="message" id="inputMessage" rows="4" placeholder="رسالتك" required autocomplete="off"></textarea>
        </div>
        <button type="submit" class="send-btn"><i class="fa-solid fa-paper-plane"></i> إرسال</button>
        <div class="contact-success" id="contact-success"></div>
      </form>
    </div>
  </section>

  <section class="public-comments-section" id="public-comments">
    <h3><i class="fa-solid fa-comments"></i> التعليقات العامة للزوار</h3>
    <form id="visitor-comment-form" class="visitor-comment-form">
      <input type="text" id="visitor-name" placeholder="اسمك (اختياري)" maxlength="30" />
      <textarea id="visitor-comment" placeholder="اكتب تعليقك هنا..." rows="3" required maxlength="300"></textarea>
      <button type="submit"><i class="fa-solid fa-comment-dots"></i> أضف تعليقك</button>
    </form>
    <div id="visitor-comments-list" class="visitor-comments-list"></div>

    <!-- إضافة Giscus أسفل التعليقات للزوار -->
    <div style="margin-top:40px"></div>
    <div class="giscus"></div>
    <script src="https://giscus.app/client.js"
        data-repo="AdamMunji/translator"
        data-repo-id="R_kgDOOyMe3A"
        data-category="General"
        data-category-id="DIC_kwDOOyMe3M4Cq2M4"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="ar"
        crossorigin="anonymous"
        async></script>
  </section>

  <footer class="main-footer">
    <p>© <span id="year"></span> أبا الحسن عباس | جميع الحقوق محفوظة.</p>
  </footer>

  <!-- تحسين تحميل المكتبات -->
  <script src="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js" defer></script>
  <script src="https://cdn.emailjs.com/sdk/3.2.0/email.min.js" defer></script>
  <script src="script.js" defer></script>

  <!-- تحسين تحميل الصور -->
  <script>
    // تحسين تحميل الصور
    document.addEventListener('DOMContentLoaded', function() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            observer.unobserve(img);
          }
        });
      }, {
        rootMargin: '50px',
        threshold: 0.1
      });

      document.querySelectorAll('img.lazy').forEach(img => {
        observer.observe(img);
      });
    });
  </script>

  <!-- تحسين الأداء -->
  <script>
    // تحسين الأداء
    function optimizePerformance() {
      // تحسين تحميل الصور
      document.querySelectorAll('img.lazy').forEach(img => {
        img.loading = 'lazy';
        img.decoding = 'async';
      });

      // تحسين التنقل
      document.querySelectorAll('a.scroll-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        });
      });

      // تحسين مودال السيرة الذاتية
      function showCV() {
        const modal = document.createElement('div');
        modal.id = 'cv-modal-bg';
        modal.innerHTML = `
          <div id="cv-modal-box" class="modal-content">
            <button id="cv-modal-close" class="close-button">×</button>
            <div class="modal-loader" id="cv-loader"></div>
            <img id="cv-modal-img" src="images/cv.jpg" alt="السيرة الذاتية" loading="lazy">
          </div>
        `;
        
        // إضافة حركات انتقالية
        requestAnimationFrame(() => {
          modal.querySelector('#cv-modal-box').style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
          modal.querySelector('#cv-modal-box').style.opacity = 1;
          modal.querySelector('#cv-modal-box').style.transform = 'scale(1)';
        });
        
        document.body.appendChild(modal);
      }

      // تحسين معرض الصور
      const translationFilenames = [
        "photo_30_2025-05-30_23-01-12.jpg",
        "photo_31_2025-05-30_23-01-12.jpg",
        "photo_32_2025-05-30_23-01-12.jpg",
        "photo_33_2025-05-30_23-01-12.jpg",
        "photo_1_2025-05-30_23-01-11.jpg",
        "photo_2_2025-05-30_23-01-11.jpg",
        "photo_3_2025-05-30_23-01-11.jpg",
        "photo_4_2025-05-30_23-01-11.jpg",
        "photo_5_2025-05-30_23-01-11.jpg",
        "photo_6_2025-05-30_23-01-11.jpg",
        "photo_7_2025-05-30_23-01-11.jpg",
        "photo_8_2025-05-30_23-01-11.jpg",
        "photo_9_2025-05-30_23-01-11.jpg",
        "photo_10_2025-05-30_23-01-11.jpg",
        "photo_11_2025-05-30_23-01-11.jpg",
        "photo_12_2025-05-30_23-01-11.jpg",
        "photo_13_2025-05-30_23-01-11.jpg",
        "photo_14_2025-05-30_23-01-11.jpg",
        "photo_15_2025-05-30_23-01-11.jpg",
        "photo_16_2025-05-30_23-01-11.jpg",
        "photo_17_2025-05-30_23-01-11.jpg",
        "photo_18_2025-05-30_23-01-11.jpg",
        "photo_19_2025-05-30_23-01-12.jpg",
        "photo_20_2025-05-30_23-01-12.jpg",
        "photo_21_2025-05-30_23-01-12.jpg",
        "photo_22_2025-05-30_23-01-12.jpg",
        "photo_23_2025-05-30_23-01-12.jpg",
        "photo_24_2025-05-30_23-01-12.jpg",
        "photo_25_2025-05-30_23-01-12.jpg",
        "photo_26_2025-05-30_23-01-12.jpg",
        "photo_27_2025-05-30_23-01-12.jpg",
        "photo_28_2025-05-30_23-01-12.jpg",
        "photo_29_2025-05-30_23-01-12.jpg"
      ];

      // تحسين معرض الصور
      document.getElementById('open-translation-gallery').onclick = function() {
        if (document.getElementById('translation-gallery-modal-bg')) {
          document.getElementById('translation-gallery-modal-bg').remove();
        }
        let modal = document.createElement('div');
        modal.id = 'translation-gallery-modal-bg';
        modal.innerHTML = `
          <div id="translation-gallery-modal-box">
            <button id="translation-gallery-modal-close" class="close-button">×</button>
            <div class="translation-gallery-grid">
              ${translationFilenames.map((name, idx) => `
                <div class="translation-gallery-img-wrap">
                  <img 
                    class="translation-gallery-img lazy"
                    src="placeholder.jpg"
                    data-src="images/translation/${name}"
                    data-big="images/translation/${name}"
                    data-title="ترجمة رقم ${(idx + 1)}"
                    alt="ترجمة رقم ${(idx + 1)}"
                    loading="lazy"
                  />
                  <div class="translation-gallery-img-title">ترجمة رقم ${(idx + 1)}</div>
                </div>
              `).join('')}
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        observer.observe(modal.querySelector('.translation-gallery-grid'));
      };
    }

    // تشغيل التحسينات
    optimizePerformance();
  </script>
</body>
</html>
